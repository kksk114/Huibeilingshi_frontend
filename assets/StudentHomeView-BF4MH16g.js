import{d as D,u as E,r as x,a as I,p as N,Q as j,c as _,b as o,w as t,e as l,i as e,f as i,V as b,h as f,B as K,K as Q,a2 as R,x as $,E as u,j as q,o as m,_ as F}from"./index-CV45lKxV.js";const G={class:"student-home-container"},J={class:"card-header"},O={class:"card-content"},W={class:"card-header"},X={class:"card-content"},Y={class:"card-header"},Z={class:"card-content"},ee={key:0,class:"loading-container"},se={key:1,class:"score-container"},oe={class:"analysis-section"},te=["innerHTML"],ae=["innerHTML"],le=["innerHTML"],ne={key:2,class:"no-data"},de={class:"user-info"},re={class:"user-details"},ce=D({__name:"StudentHomeView",setup(ie){const L=q(),T=E(),w=x("学生用户"),v=x(!1),r=x({paperScore:88,defenseScore:85,paperAnalysis:"",defenseAnalysis:"",suggestions:""}),h=I({Authorization:`Bearer ${localStorage.getItem("token")}`});N(()=>{const a=localStorage.getItem("username");a&&(w.value=a),p()});const S=a=>{const s=a.type==="application/pdf"||a.type==="application/msword"||a.type==="application/vnd.openxmlformats-officedocument.wordprocessingml.document",n=a.type==="application/pdf"||a.type==="application/vnd.ms-powerpoint"||a.type==="application/vnd.openxmlformats-officedocument.presentationml.presentation";return!s&&!n?(u.error("请上传正确格式的文件!"),!1):a.size/1024/1024<20?!0:(u.error("文件大小不能超过 20MB!"),!1)},A=a=>{u.success("论文上传成功！"),p()},B=a=>{u.success("答辩材料上传成功！"),p()},M=a=>{console.error("上传失败:",a),u.error("上传失败，请稍后重试")},p=async()=>{v.value=!0;try{const a=await j.get("/api/student/get_score");a.data&&(r.value=a.data)}catch(a){console.error("获取分数数据失败:",a)}finally{v.value=!1}},V=()=>{T.logout(),L.push("/login")};return(a,s)=>{const n=l("el-card"),d=l("el-col"),y=l("el-row"),c=l("el-icon"),k=l("el-upload"),C=l("el-skeleton"),g=l("el-collapse-item"),P=l("el-collapse"),U=l("el-empty"),H=l("el-button"),z=l("el-avatar");return m(),_("div",G,[o(y,{gutter:20},{default:t(()=>[o(d,{span:24},{default:t(()=>[o(n,{class:"welcome-card"},{default:t(()=>s[0]||(s[0]=[e("h1",null,"欢迎使用学生学习系统",-1),e("p",null,"在这里您可以上传论文和答辩材料，并获取分数和分析结果",-1)])),_:1})]),_:1})]),_:1}),o(y,{gutter:20,class:"feature-row"},{default:t(()=>[o(d,{xs:24,sm:8},{default:t(()=>[o(n,{class:"feature-card",shadow:"hover"},{header:t(()=>[e("div",J,[o(c,null,{default:t(()=>[o(i(K))]),_:1}),s[1]||(s[1]=e("span",null,"上传论文",-1))])]),default:t(()=>[e("div",O,[s[4]||(s[4]=e("p",null,"上传您的论文文档，支持 .doc, .docx, .pdf 格式",-1)),o(k,{class:"upload-area",drag:"",action:"/api/student/upload/paper","on-success":A,"on-error":M,"before-upload":S,headers:h},{tip:t(()=>s[2]||(s[2]=[e("div",{class:"el-upload__tip"}," 请上传 .doc, .docx 或 .pdf 格式文件 ",-1)])),default:t(()=>[o(c,{class:"el-icon--upload"},{default:t(()=>[o(i(b))]),_:1}),s[3]||(s[3]=e("div",{class:"el-upload__text"},[f(" 拖拽文件到此处或 "),e("em",null,"点击上传")],-1))]),_:1},8,["headers"])])]),_:1})]),_:1}),o(d,{xs:24,sm:8},{default:t(()=>[o(n,{class:"feature-card",shadow:"hover"},{header:t(()=>[e("div",W,[o(c,null,{default:t(()=>[o(i(Q))]),_:1}),s[5]||(s[5]=e("span",null,"上传答辩材料",-1))])]),default:t(()=>[e("div",X,[s[8]||(s[8]=e("p",null,"上传您的答辩 PPT 或其他材料，支持 .ppt, .pptx, .pdf 格式",-1)),o(k,{class:"upload-area",drag:"",action:"/api/student/upload/defense","on-success":B,"on-error":M,"before-upload":S,headers:h},{tip:t(()=>s[6]||(s[6]=[e("div",{class:"el-upload__tip"}," 请上传 .ppt, .pptx 或 .pdf 格式文件 ",-1)])),default:t(()=>[o(c,{class:"el-icon--upload"},{default:t(()=>[o(i(b))]),_:1}),s[7]||(s[7]=e("div",{class:"el-upload__text"},[f(" 拖拽文件到此处或 "),e("em",null,"点击上传")],-1))]),_:1},8,["headers"])])]),_:1})]),_:1}),o(d,{xs:24,sm:8},{default:t(()=>[o(n,{class:"feature-card",shadow:"hover"},{header:t(()=>[e("div",Y,[o(c,null,{default:t(()=>[o(i(R))]),_:1}),s[9]||(s[9]=e("span",null,"分数与分析结果",-1))])]),default:t(()=>[e("div",Z,[s[13]||(s[13]=e("p",null,"查看您的论文和答辩评分以及详细分析",-1)),v.value?(m(),_("div",ee,[o(C,{rows:3,animated:""})])):r.value?(m(),_("div",se,[s[11]||(s[11]=e("div",{class:"score-cards"},[e("div",{class:"score-card paper-score"},[e("div",{class:"score-title"},"论文得分"),e("div",{class:"score-value"},"88")]),e("div",{class:"score-card defense-score"},[e("div",{class:"score-title"},"答辩得分"),e("div",{class:"score-value"},"85")])],-1)),e("div",oe,[s[10]||(s[10]=e("h3",null,"分析结果",-1)),o(P,null,{default:t(()=>[o(g,{title:"论文分析",name:"1"},{default:t(()=>[e("div",{innerHTML:r.value.paperAnalysis},null,8,te)]),_:1}),o(g,{title:"答辩分析",name:"2"},{default:t(()=>[e("div",{innerHTML:r.value.defenseAnalysis},null,8,ae)]),_:1}),o(g,{title:"改进建议",name:"3"},{default:t(()=>[e("div",{innerHTML:r.value.suggestions},null,8,le)]),_:1})]),_:1})])])):(m(),_("div",ne,[o(U,{description:"暂无评分数据，请先上传论文和答辩材料"}),o(H,{type:"primary",onClick:p},{default:t(()=>s[12]||(s[12]=[f("获取分数和分析")])),_:1})]))])]),_:1})]),_:1})]),_:1}),o(y,{class:"user-info-row"},{default:t(()=>[o(d,{span:24},{default:t(()=>[o(n,{class:"user-info-card"},{default:t(()=>[e("div",de,[o(z,{size:64,icon:"el-icon-user"}),e("div",re,[e("h3",null,$(w.value),1),s[15]||(s[15]=e("p",null,"学生账号",-1)),o(H,{type:"danger",size:"small",onClick:V},{default:t(()=>s[14]||(s[14]=[f("退出登录")])),_:1})])])]),_:1})]),_:1})]),_:1})])}}}),pe=F(ce,[["__scopeId","data-v-b9afb3c8"]]);export{pe as default};
