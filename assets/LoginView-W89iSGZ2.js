import{d as B,u as E,r as m,a as F,c as N,b as o,w as t,e as l,f as V,g as U,l as q,h as d,i as y,j as A,E as h,o as I,_ as S}from"./index-CV45lKxV.js";const T={class:"login-container"},j={class:"user-type-switch"},z=B({__name:"LoginView",setup(M){const r=A(),_=E(),i=m(),p=m(!1),n=m("teacher"),s=F({username:"",password:""}),b={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},x=async()=>{i.value&&await i.value.validate(async f=>{if(f){p.value=!0;try{let e=!1;n.value==="teacher"?(e=await _.login(s.username,s.password),e?r.push("/teaching-design"):h.error("教师登录失败，请检查用户名和密码")):(e=await _.studentLogin(s.username,s.password),e?r.push("/student-home"):h.error("学生登录失败，请检查用户名和密码"))}finally{p.value=!1}}})},k=()=>{n.value==="teacher"?r.push("/register"):r.push("/student-register")};return(f,e)=>{const c=l("el-radio-button"),C=l("el-radio-group"),g=l("el-icon"),w=l("el-input"),u=l("el-form-item"),v=l("el-button"),L=l("el-form"),R=l("el-card");return I(),N("div",T,[o(R,{class:"login-card"},{header:t(()=>[e[5]||(e[5]=y("h2",null,"AI教师备课系统",-1)),y("div",j,[o(C,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=a=>n.value=a),size:"large"},{default:t(()=>[o(c,{label:"teacher"},{default:t(()=>e[3]||(e[3]=[d("教师登录")])),_:1}),o(c,{label:"student"},{default:t(()=>e[4]||(e[4]=[d("学生登录")])),_:1})]),_:1},8,["modelValue"])])]),default:t(()=>[o(L,{model:s,rules:b,ref_key:"loginFormRef",ref:i},{default:t(()=>[o(u,{prop:"username"},{default:t(()=>[o(w,{modelValue:s.username,"onUpdate:modelValue":e[1]||(e[1]=a=>s.username=a),placeholder:"用户名"},{prefix:t(()=>[o(g,null,{default:t(()=>[o(V(U))]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(u,{prop:"password"},{default:t(()=>[o(w,{modelValue:s.password,"onUpdate:modelValue":e[2]||(e[2]=a=>s.password=a),type:"password",placeholder:"密码"},{prefix:t(()=>[o(g,null,{default:t(()=>[o(V(q))]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(u,null,{default:t(()=>[o(v,{type:"primary",loading:p.value,onClick:x,style:{width:"100%"}},{default:t(()=>e[6]||(e[6]=[d(" 登录 ")])),_:1},8,["loading"])]),_:1}),o(u,null,{default:t(()=>[o(v,{onClick:k,type:"success",style:{width:"100%"}},{default:t(()=>e[7]||(e[7]=[d(" 注册 ")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}}),G=S(z,[["__scopeId","data-v-47decaf6"]]);export{G as default};
