import{d as g,r as h,a as w,c as d,b as a,w as n,e as r,i as t,t as V,f as b,V as B,h as E,E as l,o as c,_ as M}from"./index-CV45lKxV.js";const U={class:"upload-defense-container"},k={class:"upload-content"},C={key:0,class:"upload-status"},N=g({__name:"UploadDefenseView",setup(P){const o=h(null),i=w({Authorization:`Bearer ${localStorage.getItem("token")}`}),u=s=>s.type==="application/pdf"||s.type==="application/vnd.ms-powerpoint"||s.type==="application/vnd.openxmlformats-officedocument.presentationml.presentation"?s.size/1024/1024<20?(o.value={message:"正在上传文件，请稍候...",type:"info"},!0):(l.error("文件大小不能超过 20MB!"),!1):(l.error("请上传 .ppt, .pptx 或 .pdf 格式的文件!"),!1),_=(s,e)=>{l.success("答辩材料上传成功！"),o.value={message:"答辩材料上传成功！文件将被系统分析并评分。",type:"success"}},f=s=>{console.error("上传失败:",s),l.error("上传失败，请稍后重试"),o.value={message:"上传失败，请稍后重试。",type:"error"}},m=()=>{l.warning("一次只能上传一个文件")};return(s,e)=>{const p=r("el-icon"),v=r("el-upload"),x=r("el-alert"),y=r("el-card");return c(),d("div",U,[a(y,{class:"upload-card"},{header:n(()=>e[0]||(e[0]=[t("div",{class:"card-header"},[t("h2",null,"上传答辩材料")],-1)])),default:n(()=>[t("div",k,[e[3]||(e[3]=t("p",{class:"upload-description"}," 上传您的答辩 PPT 或其他答辩材料，支持 .ppt, .pptx, .pdf 格式。 答辩材料将由系统进行智能分析，并提供评分和改进建议。 ",-1)),a(v,{class:"upload-area",drag:"",action:"/api/student/upload_answer","on-success":_,"on-error":f,"before-upload":u,headers:i,limit:1,"on-exceed":m},{tip:n(()=>e[1]||(e[1]=[t("div",{class:"el-upload__tip"}," 请上传 .ppt, .pptx 或 .pdf 格式文件，文件大小不超过 20MB ",-1)])),default:n(()=>[a(p,{class:"el-icon--upload"},{default:n(()=>[a(b(B))]),_:1}),e[2]||(e[2]=t("div",{class:"el-upload__text"},[E(" 拖拽文件到此处或 "),t("em",null,"点击上传")],-1))]),_:1},8,["headers"]),o.value?(c(),d("div",C,[a(x,{title:o.value.message,type:o.value.type,closable:!1,"show-icon":""},null,8,["title","type"])])):V("",!0)])]),_:1})])}}}),z=M(N,[["__scopeId","data-v-ca6bc47b"]]);export{z as default};
